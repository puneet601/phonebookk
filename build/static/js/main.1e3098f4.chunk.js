(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{34:function(e,n,t){},57:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(0),r=t(27),o=t.n(r),u=t(17),i=t(9),s=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsx)("input",{placeholder:"Enter the name of contact",value:e.newName,onChange:e.setName,required:!0}),Object(c.jsx)("input",{placeholder:"Enter the number of contact",value:e.newNumber,type:"number",onChange:e.setNumber,required:!0}),Object(c.jsx)("button",{type:"submit",onClick:e.addName,children:"Add"})]})},d=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsx)("h2",{children:"Sort :"})," ",Object(c.jsx)("input",{placeholder:"Enter an alphabet",value:e.newSearch,onChange:e.handleSearchChange}),Object(c.jsx)("br",{})]})},l=(t(34),function(e,n){return Object(c.jsxs)("li",{children:[e.name,"  ",e.number," ",Object(c.jsx)("button",{onClick:e.deletePerson,children:"Delete"})]})}),b=function(e){return Object(c.jsx)("ul",{children:e.persons.filter((function(n){return n.name.toUpperCase().includes(e.newSearch.toUpperCase())})).map((function(n){return Object(c.jsx)(l,{name:n.name,number:n.number,deletePerson:e.handleDeletePerson(n.name,n.id)},n.id)}))})},j=t(11),f=t.n(j),h="/api/persons",m=function(){return f.a.get(h).then((function(e){return e.data}))},O=function(e){return f.a.post(h,e).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},x=function(e,n){return f.a.put("".concat(h,"/").concat(e),n)},v=function(e){var n=e.message,t=e.status;return null===n?null:!1===t?Object(c.jsx)("div",{className:"error",children:n}):Object(c.jsx)("div",{className:"success",children:n})},g=t(14),S=t(2),N=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),j=l[0],f=l[1],h=Object(a.useState)(""),N=Object(i.a)(h,2),w=N[0],k=N[1],C=Object(a.useState)(""),D=Object(i.a)(C,2),P=D[0],y=D[1],I=Object(a.useState)(null),E=Object(i.a)(I,2),T=E[0],q=E[1],A=Object(a.useState)(!1),J=Object(i.a)(A,2),M=J[0],U=J[1],B=function(e){return e.name===j},z=function(e){return e.number===w};Object(a.useEffect)((function(){console.log("effect"),m().then((function(e){r(e)}))}),[]);var F=function(e,n){return function(){window.confirm("Do you wante to Delete ".concat(e," ?"))&&p(n).then((function(){r(t.filter((function(e){return e.id!==n}))),U(!0),q("Deleted ".concat(e)),setTimeout((function(){q(null)}),5e3),f(""),k("")})).catch((function(n){U(!1),q("'".concat(e,"' cannot be Deleted.")),setTimeout((function(){q(null)}),5e3)}))}};return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("form",{children:[Object(c.jsx)(v,{message:T,status:M}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(d,{newSearch:P,handleSearchChange:function(e){y(e.target.value)}}),Object(c.jsx)(s,{newName:j,setName:function(e){return f(e.target.value)},number:w,setNumber:function(e){return k(e.target.value)},addName:function(e){e.preventDefault();var n={name:j,number:w,id:Math.floor(101*Math.random())};if(-1!==t.findIndex(B)){if(t.findIndex(z)===t.findIndex(B))U(!0),q("".concat(j,"  is already added to phonebook")),setTimeout((function(){q(null)}),5e3);else if(t.findIndex(z)!==t.findIndex(B)){var c=t.find(B),a=t.find((function(e){return e.id===c.id})),o=a.id,i=Object(u.a)(Object(u.a)({},a),{},{number:w});x(o,i).then((function(e){r(t.map((function(n){return n.id!==o?n:e.data})))})).catch((function(e){U(!1),q("".concat(c.name,"  is already added to phonebook")),setTimeout((function(){q(null)}),5e3)}))}}else O(n).then((function(e){r(t.concat(e)),U(!0),q("Added ".concat(n.name)),f(""),k("")})).catch((function(e){U(!1),q("".concat(e.response.data.error)),console.log(e.response.data)})),setTimeout((function(){q(null)}),3e3)},handleDeletePerson:F})]}),Object(c.jsxs)(g.a,{children:[Object(c.jsx)(g.b,{to:"/contacts",children:Object(c.jsx)("h2",{children:"Numbers"})}),Object(c.jsx)(S.c,{children:Object(c.jsx)(S.a,{path:"/contacts",children:Object(c.jsx)(b,{persons:t,newSearch:P,handleDeletePerson:F})})})]})]})};o.a.render(Object(c.jsx)(N,{}),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.1e3098f4.chunk.js.map